os: linux
language: node_js
node_js: '12'

services:
  - docker
  
env:
  global:
    - IMAGE=trzeci/emscripten
    - NAME=emscipten
    - RUN="docker exec -it emscipten"

install: skip

before_script:
  - docker pull $IMAGE
  - docker images
  - docker run -dit --name $NAME -v $(pwd)/libheif:/src -w /src $IMAGE bash
  - sleep 2
  - docker ps -a
  - $RUN cat /etc/os-release

script:
  - $RUN ./build-emscripten.sh
  - ls libheif
